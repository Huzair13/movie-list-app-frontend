{"ast":null,"code":"import React,{Component}from\"react\";import axios from'axios';import'bootstrap-icons/font/bootstrap-icons.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default class Search extends Component{constructor(props){super(props);this.state={movieName:'',res:[]};this.handleSearch=this.handleSearch.bind(this);this.handleChange=this.handleChange.bind(this);this.fetchPoster=this.fetchPoster.bind(this);}handleChange(event){this.setState({movieName:event.target.value});}async fetchPoster(movieName){const apiKey='5aefe5fe';// Replace with your actual API key\nconst baseUrl='https://www.omdbapi.com/';try{const response=await fetch(`${baseUrl}?apikey=${apiKey}&t=${encodeURIComponent(movieName)}&type=movie`);if(!response.ok){console.error(`Error fetching data for ${movieName}`);return null;}const data=await response.json();return data.Poster||null;// Use 'data.Poster' if available, otherwise return null\n}catch(error){console.error('Error fetching poster:',error);return null;}}async handleSearch(event){event.preventDefault();if(!this.state.movieName.trim()){this.setState({res:[]});return;}try{// Pass movieName as a query parameter in the GET request\nconst response=await axios.post('https://finaltask.huzairr.com/search',{movieName:this.state.movieName});console.log('Movie Name:',this.state.movieName);console.log('Response:',response.data);// Check for \"Movie Not Found\" response\nif(response.data===\"Movie Not Found :(\"){this.setState({res:[]});return;}const moviesWithPosters=[];for(const movie of response.data){const poster=await this.fetchPoster(movie.movieName);moviesWithPosters.push({...movie,poster});}this.setState({res:moviesWithPosters.length?moviesWithPosters:[]});}catch(error){console.error('Search error:',error);if(error.response){console.error('Error data:',error.response.data);// Log error response\nconsole.error('Error status:',error.response.status);// Log error status\n}}}render(){return/*#__PURE__*/_jsxs(\"div\",{className:\"container mt-4\",children:[/*#__PURE__*/_jsx(\"form\",{onSubmit:this.handleSearch,className:\"mb-3\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"input-group\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"movieName\",onChange:this.handleChange,className:\"form-control custom-input\",placeholder:\"Enter movie name\",required:true}),/*#__PURE__*/_jsx(\"div\",{className:\"input-group-append\",children:/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn btn-primary\",children:/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-search\"})})})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"row justify-content-center\",children:Array.isArray(this.state.res)&&this.state.res.map(movie=>/*#__PURE__*/_jsx(\"div\",{className:\"col-md-6 mb-4\",children:/*#__PURE__*/_jsx(\"div\",{className:\"card\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"row no-gutters\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-md-6\",children:/*#__PURE__*/_jsx(\"img\",{src:movie.poster,className:\"card-img\",alt:`${movie.movieName} Poster`})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-md-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card-body\",children:[/*#__PURE__*/_jsx(\"h5\",{className:\"card-title movie-name\",children:/*#__PURE__*/_jsx(\"span\",{style:{color:'#3498db',fontSize:'1.5em',fontWeight:'bold'},children:movie.movieName})}),/*#__PURE__*/_jsxs(\"p\",{className:\"card-text\",children:[\"Director: \",movie.director]}),/*#__PURE__*/_jsxs(\"p\",{className:\"card-text\",children:[\"Release Year: \",movie.releaseYear]}),/*#__PURE__*/_jsxs(\"p\",{className:\"card-text\",children:[\"Language: \",movie.language]}),/*#__PURE__*/_jsxs(\"p\",{className:\"card-text\",children:[\"Rating: \",movie.rating]})]})})]})})},movie.id))})]});}}","map":{"version":3,"names":["React","Component","axios","jsx","_jsx","jsxs","_jsxs","Search","constructor","props","state","movieName","res","handleSearch","bind","handleChange","fetchPoster","event","setState","target","value","apiKey","baseUrl","response","fetch","encodeURIComponent","ok","console","error","data","json","Poster","preventDefault","trim","post","log","moviesWithPosters","movie","poster","push","length","status","render","className","children","onSubmit","type","name","onChange","placeholder","required","Array","isArray","map","src","alt","style","color","fontSize","fontWeight","director","releaseYear","language","rating","id"],"sources":["/Users/huzairahmed/Documents/aws Training/Frontend/src/SearchMovie/searchMovie.js"],"sourcesContent":["import React, { Component } from \"react\";\nimport axios from 'axios';\nimport 'bootstrap-icons/font/bootstrap-icons.css';\n\nexport default class Search extends Component {\n  constructor(props) {\n    super(props);\n    \n    this.state = {\n      movieName: '',\n      res: [],\n    };\n\n    this.handleSearch = this.handleSearch.bind(this);\n    this.handleChange = this.handleChange.bind(this);\n    this.fetchPoster = this.fetchPoster.bind(this);\n  }\n\n  handleChange(event) {\n    this.setState({ movieName: event.target.value });\n  }\n\n  async fetchPoster(movieName) {\n    const apiKey = '5aefe5fe'; // Replace with your actual API key\n    const baseUrl = 'https://www.omdbapi.com/';\n\n    try {\n      const response = await fetch(`${baseUrl}?apikey=${apiKey}&t=${encodeURIComponent(movieName)}&type=movie`);\n      \n      if (!response.ok) {\n        console.error(`Error fetching data for ${movieName}`);\n        return null;\n      }\n\n      const data = await response.json();\n      return data.Poster || null; // Use 'data.Poster' if available, otherwise return null\n    } catch (error) {\n      console.error('Error fetching poster:', error);\n      return null;\n    }\n  }\n\n  async handleSearch(event) {\n    event.preventDefault();\n  \n    if (!this.state.movieName.trim()) {\n      this.setState({ res: [] });\n      return;\n    }\n  \n    try {\n      // Pass movieName as a query parameter in the GET request\n      const response = await axios.post('https://finaltask.huzairr.com/search', {\n        movieName: this.state.movieName,\n      });\n  \n  \n      console.log('Movie Name:', this.state.movieName);\n      console.log('Response:', response.data);\n  \n      // Check for \"Movie Not Found\" response\n      if (response.data === \"Movie Not Found :(\") {\n        this.setState({ res: [] });\n        return;\n      }\n  \n      const moviesWithPosters = [];\n  \n      for (const movie of response.data) {\n        const poster = await this.fetchPoster(movie.movieName);\n        moviesWithPosters.push({ ...movie, poster });\n      }\n  \n      this.setState({ res: moviesWithPosters.length ? moviesWithPosters : [] });\n    } catch (error) {\n      console.error('Search error:', error);\n      if (error.response) {\n        console.error('Error data:', error.response.data); // Log error response\n        console.error('Error status:', error.response.status); // Log error status\n      }\n    }\n  }\n  \n  \n  render() {\n    return (\n      <div className=\"container mt-4\">\n        <form onSubmit={this.handleSearch} className=\"mb-3\">\n          <div className=\"input-group\">\n            <input\n              type=\"text\"\n              name=\"movieName\"\n              onChange={this.handleChange}\n              className=\"form-control custom-input\"\n              placeholder=\"Enter movie name\"\n              required\n            />\n            <div className=\"input-group-append\">\n              <button type=\"submit\" className=\"btn btn-primary\">\n                <i className=\"bi bi-search\"></i>\n              </button>\n            </div>\n          </div>\n        </form>\n\n        <div className=\"row justify-content-center\">\n          {Array.isArray(this.state.res) && this.state.res.map(movie => (\n            <div key={movie.id} className=\"col-md-6 mb-4\">\n              <div className=\"card\">\n                <div className=\"row no-gutters\">\n                  <div className=\"col-md-6\">\n                    <img src={movie.poster} className=\"card-img\" alt={`${movie.movieName} Poster`} />\n                  </div>\n                  <div className=\"col-md-6\">\n                    <div className=\"card-body\">\n                      <h5 className=\"card-title movie-name\">\n                        <span style={{ color: '#3498db', fontSize: '1.5em', fontWeight: 'bold' }}>\n                          {movie.movieName}\n                        </span>\n                      </h5>\n                      <p className=\"card-text\">Director: {movie.director}</p>\n                      <p className=\"card-text\">Release Year: {movie.releaseYear}</p>\n                      <p className=\"card-text\">Language: {movie.language}</p>\n                      <p className=\"card-text\">Rating: {movie.rating}</p>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </div>\n          ))}\n        </div>\n      </div>\n    );\n  }\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}