{"ast":null,"code":"import React,{Component}from'react';import'bootstrap/dist/css/bootstrap.min.css';import axios from'axios';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";class MovieList extends Component{constructor(props){super(props);this.handleDelete=async movieName=>{try{const action=window.confirm(\"Are you sure to delete?\");if(action){const endpoint=`http://44.211.90.107:8100/delete`;console.log('DELETE endpoint:',endpoint);const response=await axios.delete(endpoint,{data:{movieName:movieName}// Use 'data' to send the request body\n});console.log('DELETE response:',response);console.log('Delete successful:',response.data);window.location.reload();}else{console.log(\"Deletion cancelled\");}}catch(error){console.error('Error deleting movie:',error.message);}};this.fetchMovieData=async()=>{const{movies}=this.props;const apiKey='5aefe5fe';const baseUrl='https://www.omdbapi.com/';const moviePosters=await Promise.all(movies.map(async movie=>{try{console.log(movie);const response=await axios.get(`${baseUrl}?apikey=${apiKey}&t=${encodeURIComponent(movie)}&type=movie`);console.log(`${baseUrl}?apikey=${apiKey}&t=${encodeURIComponent(movie)}&type=movie`);const data=response.data;console.log(response.data);if(data&&data.Title&&data.Type==='movie'){return{name:data.Title,// Use data.Title for consistency\nposter:data.Poster};}else{return{name:movie.movieName,// Fallback to movieName in case of error\nposter:null};}}catch(error){console.error(`Error fetching data for ${movie}`,error);return null;}}));const movieResults=moviePosters.filter(movie=>movie!==null&&typeof movie.name==='string');this.setState({movieData:movieResults});};this.state={movieData:[]};this.handleDelete=this.handleDelete.bind(this);}componentDidUpdate(prevProps){if(prevProps.movies!==this.props.movies){this.fetchMovieData();}}componentDidMount(){this.fetchMovieData();}render(){const{movieData}=this.state;return/*#__PURE__*/_jsx(\"div\",{className:\"container mt-5\",children:/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:movieData.sort((a,b)=>a.name.localeCompare(b.name)).map((movie,index)=>/*#__PURE__*/_jsx(\"div\",{className:\"col-md-4 mb-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card\",children:[movie.poster?/*#__PURE__*/_jsx(\"img\",{src:movie.poster,className:\"card-img-top\",alt:`${movie.name} Poster`,style:{height:'500px'}}):/*#__PURE__*/_jsx(\"div\",{className:\"no-poster\",children:/*#__PURE__*/_jsx(\"p\",{children:\"No Image Found\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"card-body\",children:[/*#__PURE__*/_jsx(\"h5\",{className:\"card-title\",children:movie.name}),/*#__PURE__*/_jsx(\"button\",{style:{marginRight:'8px'},className:\"btn btn-danger\",onClick:()=>this.handleDelete(movie.name),children:\"Delete\"})]})]})},index))})});}}export default MovieList;","map":{"version":3,"names":["React","Component","axios","jsx","_jsx","jsxs","_jsxs","MovieList","constructor","props","handleDelete","movieName","action","window","confirm","endpoint","console","log","response","delete","data","location","reload","error","message","fetchMovieData","movies","apiKey","baseUrl","moviePosters","Promise","all","map","movie","get","encodeURIComponent","Title","Type","name","poster","Poster","movieResults","filter","setState","movieData","state","bind","componentDidUpdate","prevProps","componentDidMount","render","className","children","sort","a","b","localeCompare","index","src","alt","style","height","marginRight","onClick"],"sources":["/Users/huzairahmed/Documents/aws Training/Frontend/src/MovieList/MovieListFile.js"],"sourcesContent":["import React, { Component } from 'react';\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport axios from 'axios';\n\nclass MovieList extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      movieData: [],\n    };\n\n    this.handleDelete = this.handleDelete.bind(this);\n  }\n\n  componentDidUpdate(prevProps) {\n    if (prevProps.movies !== this.props.movies) {\n      this.fetchMovieData();\n    }\n  }\n\n  handleDelete = async (movieName) => {\n    try {\n      const action= window.confirm(\"Are you sure to delete?\");\n      if(action){\n        const endpoint = `http://44.211.90.107:8100/delete`;\n\n        console.log('DELETE endpoint:', endpoint);\n        const response = await axios.delete(endpoint, {\n          data: { movieName: movieName } // Use 'data' to send the request body\n        });\n        console.log('DELETE response:', response);\n        console.log('Delete successful:', response.data);\n        window.location.reload();\n      }\n      else{\n        console.log(\"Deletion cancelled\");\n      }\n      \n    } catch (error) {\n      console.error('Error deleting movie:', error.message);\n    }\n  };\n\n  componentDidMount() {\n    this.fetchMovieData();\n  }\n\n  fetchMovieData = async () => {\n    const { movies } = this.props;\n    const apiKey = '5aefe5fe';\n    const baseUrl = 'https://www.omdbapi.com/';\n  \n    const moviePosters = await Promise.all(\n      movies.map(async (movie) => {\n        try {\n          console.log(movie)\n          const response = await axios.get(\n            `${baseUrl}?apikey=${apiKey}&t=${encodeURIComponent(movie)}&type=movie`\n          );\n  \n          console.log(`${baseUrl}?apikey=${apiKey}&t=${encodeURIComponent(movie)}&type=movie`)\n          const data = response.data;\n          console.log(response.data)\n  \n          if (data && data.Title && data.Type === 'movie') {\n            return {\n              name: data.Title, // Use data.Title for consistency\n              poster: data.Poster,\n            };\n          } else {\n            return {\n              name: movie.movieName, // Fallback to movieName in case of error\n              poster: null,\n            };\n          }\n        } catch (error) {\n          console.error(`Error fetching data for ${movie}`, error);\n          return null;\n        }\n      })\n    );\n  \n    const movieResults = moviePosters.filter(\n      (movie) => movie !== null && typeof movie.name === 'string'\n    );\n    this.setState({ movieData: movieResults });\n  };\n  \n\n  render() {\n    const { movieData } = this.state;\n\n    return (\n      <div className=\"container mt-5\">\n        <div className=\"row\">\n          {movieData\n            .sort((a, b) => a.name.localeCompare(b.name))\n            .map((movie, index) => (\n              <div key={index} className=\"col-md-4 mb-4\">\n                <div className=\"card\">\n                  {movie.poster ? (\n                    <img\n                      src={movie.poster}\n                      className=\"card-img-top\"\n                      alt={`${movie.name} Poster`}\n                      style={{ height: '500px' }}\n                    />\n                  ) : (\n                    <div className=\"no-poster\">\n                      <p>No Image Found</p>\n                    </div>\n                  )}\n                  <div className=\"card-body\">\n                    <h5 className=\"card-title\">{movie.name}</h5>\n                    <button\n                      style={{ marginRight: '8px' }}\n                      className=\"btn btn-danger\"\n                      onClick={() => this.handleDelete(movie.name)}\n                    >\n                      Delete\n                    </button>\n                  </div>\n                </div>\n              </div>\n            ))}\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default MovieList;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}